    <!DOCTYPE html>
    <html lang="en">
    	<head>
    		<meta charset="utf-8">
    		<title>GM - Global Competitiveness Report</title>
    		<script type="text/javascript" src="d3.js"></script>
    		<style type="text/css">
    		</style>

    		<table border="0">
            <tr>
                <th rowspan="2"><div id="chart1"></div></th>
                <td><div id="chart2" ></div></td>
                </tr>
                <tr>
                <td><div id="chart3" ></div></td>
            </tr>
        </table>
    	</head>

    	
        <body>
            
    		<script>
        // Chart dimensions.
        var margin = {top: 30, right: 30, bottom: 30, left: 40};
        var data;
    		var w = 1200 - margin.right;
        var h = 600 - margin.top - margin.bottom;
        var buffer = 20;
        var svg;
        var xScale, yScale, rScale, cScale;
        var yearCount = 0;
        var initialTimer;
        var selected;
        var font = '"Bariol Regular",Lucida Sans Unicode,Lucida Grande,sans-serif';

        // svg for main canvas
        var main_svg = d3.select("body").append("svg")
          .attr("width", w + margin.left + margin.right)
          .attr("height", h + margin.top + margin.bottom)
          .append("g")
          .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
            
    		d3.csv("GCI_CompleteData4_test_dataset.csv", function(error, dataset) {
          if(error) {
            console.log(error);
          } else {
            data = dataset;
            data.forEach(function(d){ 
                // for animation
                d.Year = +d.Year;

                //bubble area size
                d.Population = +d.Population;

                //for y axis
                d.Global_Competitiveness_Index = +d.Global_Competitiveness_Index;
                
                //for x axis
                d.GDP = +d.GDP;
                d.Area = +d.Area;

                // console.log(d.Global_Competitiveness_Index);
            });
          }

            // scaling the attribute values
            var minGDP = d3.min(data, function(d) {
                          return +d.GDP; });
            var maxGDP = d3.max(data, function(d) {
                          return +d.GDP; });
            var minGCI = d3.min(data, function(d) {
                          return +d.Global_Competitiveness_Index; });
            var maxGCI = d3.max(data, function(d) {
                          return +d.Global_Competitiveness_Index; });
            var minPop = d3.min(data, function(d) {
                          return +d.Population; });
            var maxPop = d3.max(data, function(d) {
                          return +d.Population; });
                    
            //console.log(minGDP);

            // scaling the attributes values for better readability

            // x-axis log scale for GDP
            xScale = d3.scaleLog();
            xScale.domain([minGDP, maxGDP]);
            xScale.range([(buffer*2), w-buffer]);
                
           // console.log(xScale);

            // linear scale for for Global competitive index
            yScale = d3.scaleLinear();
            yScale.domain([minGCI, maxGCI]);
            yScale.range([h-(buffer*2), (buffer*2)]);

            // sqrt scale for bubble radius
            rScale = d3.scaleSqrt(); 
            rScale.domain([minPop, maxPop]);
            rScale.range([2, ((w*h)/10000)]);

            // linear scale for year
            yearScale = d3.scaleLinear().domain([70, 336])
                        .range([0,130]);

            // x axis GDP
            var gdp_axis = d3.axisBottom(xScale);
            gdp_axis.tickArguments([10, "d"]);

            // y axis GCI
            var gci_axis = d3.axisLeft(yScale);
            gci_axis.tickArguments([4]);

            var formatAsWholeNum = d3.format("d");

            // attaching both x and y axis to main svg 
            main_svg.append("g").attr("transform", "translate(0," + 
                     (h-buffer) + ")").call(gdp_axis);
            
            main_svg.append("g").attr("transform", "translate(" + 
                     buffer + ",0)").call(gci_axis);

            // adding  main-label for GDP on x-axis
            main_svg.append("text").attr("text-anchor", "middle")
                    .text("Income")
                    .attr("x", w-(w/2)).attr("y", h + (h/20))
                    .attr("font-size", 25).style('font-family', font)
                    .attr("fill", "#073F59").style("opacity", 0.8);

            // adding  mini-label for GDP on x-axis
            main_svg.append("text").attr("text-anchor", "end")
                    .text("per person (GDP/capita,PPPS inflation-adjusted)")
                    .attr("x", w-(w/40)).attr("y", h - (h/22))
                    .attr("font-size", 13).attr("font-family", font)
                    .attr("fill", "#073F59").style("opacity", 0.8);

            // adding  main-label for GCI on y-axis
            main_svg.append("text").attr("text-anchor", "middle")
                    .text("Global Competitiveness Index")
                    .attr("x", -(w/5)).attr("font-size", 21)
                    .style('font-family', font).attr("fill", "#073F59")
                    .style("opacity", 0.8).attr("transform", "rotate(-90)");

            // adding mini-label for Global comp score on y-axis
            main_svg.append("text").attr("text-anchor", "end")
                    .text("Score")
                    .attr("x", -(w/30)).attr("y", buffer*2)
                    .attr("font-size", 13).attr("font-family", font)
                    .attr("fill", "#073F59").attr("transform", "rotate(-90)")
                    .style("opacity", 0.8);

                

    });
    </script>
  </body>
</html>